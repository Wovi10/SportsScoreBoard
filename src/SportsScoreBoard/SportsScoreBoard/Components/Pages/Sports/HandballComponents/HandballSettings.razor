@using MudBlazor.Utilities
@using SportsScoreBoard.Models.Handball
@using SportsScoreBoard.Components.Pages.Sports.Shared

<MudExpansionPanel Class="flex-end" Expanded="true">
    <TitleContent>
        <MudText Typo="Typo.h4">Settings</MudText>
    </TitleContent>
    <ChildContent>
        <Customization @ref="_customization"
                       Game="Game"
                       ResetColorsClicked="ResetColorsClicked"
                       HomeColorChanged="HomeColorChanged"
                       AwayColorChanged="AwayColorChanged"
                       HomeTextColorChanged="HomeTextColorChanged"
                       AwayTextColorChanged="AwayTextColorChanged"/>

        <ResetButtons VisibleButtons="Game.Settings.VisibleButtons"
                      ResetGame="ResetGameClicked"
                      ResetScore="ResetScoreClicked"
                      ResetTimeouts="ResetTimeoutsClicked"
                      ResetTimer="ResetTimerClicked"/>

        <ToggleButtons VisibleButtons="Game.Settings.VisibleToggleButtons"
                       ToggleShowTimeouts="ToggleShowTimeouts"
                       ToggleShowTeamNames="ToggleShowTeamNames"
                       ToggleManualScoring="ToggleManualScoring"
                       ToggleShowTimer="ToggleShowTimer"
                       Settings="Game.Settings"/>
    </ChildContent>
</MudExpansionPanel>

@code
{
    [Parameter] public required HandballGame Game { get; set; }
    [Parameter] public required EventCallback ResetTimerClicked { get; set; }
    [Parameter] public required EventCallback ResetScoreClicked { get; set; }
    [Parameter] public required EventCallback ResetTimeoutsClicked { get; set; }
    [Parameter] public required EventCallback ResetGameClicked { get; set; }
    [Parameter] public required EventCallback ResetColorsClicked { get; set; }
    [Parameter] public required EventCallback ToggleShowTimeouts { get; set; }
    [Parameter] public required EventCallback ToggleShowTeamNames { get; set; }
    [Parameter] public required EventCallback ToggleManualScoring { get; set; }
    [Parameter] public required EventCallback ToggleShowTimer { get; set; }
    [Parameter] public required EventCallback<MudColor> HomeColorChanged { get; set; }
    [Parameter] public required EventCallback<MudColor> AwayColorChanged { get; set; }
    [Parameter] public required EventCallback<MudColor> HomeTextColorChanged { get; set; }
    [Parameter] public required EventCallback<MudColor> AwayTextColorChanged { get; set; }

    private Customization _customization;

    public async Task ResetColors()
        => await _customization.ResetColors();
}
